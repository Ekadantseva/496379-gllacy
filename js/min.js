var initPopup=function(){var e=document.querySelector(".vidget-contacts .button-small");if(e){var t=document.querySelector(".popup"),o=t.querySelector(".popup-close"),a=t.querySelector("[name=user-name]"),s=t.querySelector("[name=user-email]"),r=t.querySelector("[name=message]"),u=document.querySelector(".popup .button-small"),n=localStorage.getItem("user-name"),l=localStorage.getItem("user-email");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("popup-show"),n?(a.value=n,l?(s.value=l,r.focus()):s.focus()):a.focus()}),o.addEventListener("click",function(e){e.preventDefault(),t.classList.remove("popup-show"),t.classList.remove("popup-error")}),u.addEventListener("click",function(e){a.value&&s.value&&r.value?(localStorage.setItem("user-name",a.value),localStorage.setItem("user-email",s.value)):(e.preventDefault(),t.classList.remove("popup-error"),t.offsetWidth=t.offsetWidth,t.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&t.classList.contains("popup-show")&&(t.classList.remove("popup-show"),t.classList.remove("popup-error"))})}},initBasket=function(){for(var e=document.querySelectorAll(".catalog-item .button-small"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=document.querySelector("a.button-basket");t&&t.classList.add("full")})};document.addEventListener("DOMContentLoaded",function(e){initPopup(),initBasket()});
